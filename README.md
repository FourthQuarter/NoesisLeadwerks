# Noesis Leadwerks integration #

This repository provides an integration of NoesisGUI into the Leadwerks game engine.

## Getting started ##

###Overview###
    +Root
     +Documentation: Doxygen docs
	 +Examples: Implementation examples
     +Integration: Required header / source files


###Pre-Requirements###

I. **Open Input System (OIS)**

Download [OIS](https://github.com/wgois/Object-oriented-Input-System--OIS- "OIS") and link / include it in your project.

II. **Noesis**

Download NoesisGUI and link / include it in your project. Make sure you read its documentation.

III. **Wrapper**

Include the content of *Integration* in your project.

### First steps ###

Once you have all necessary files added to your project start by adding the includes for the input and ui system to your app.h:

    #include <UI\UISystem.h>
    #include <Input\InputSystem.h>
    
Define an object of each system and a renderer:

	UISystem*		uiSystem;
	UIRenderer*		uiRenderer;
	InputSystem*	inputSystem;

Initialize each object inside the *App::Start* method:

	// Create ui system
	uiSystem	= new UISystem();

	// Create a renderer with an unique ID that is generated by our ui system
	uiRenderer	= new UIRenderer(uiSystem->GenerateUID());
	uiRenderer->Load("Gui/Samples/Tux.xaml", ""); // Load XAML
	uiRenderer->SetSize(context->GetWidth(), context->GetHeight());
	uiSystem->AddInputListener(uiRenderer); // Make the renderer receive input

	// Create the input system
	inputSystem = new InputSystem((size_t)window->hwnd);
	inputSystem->SetDisplayAreaSize(context->GetWidth(), context->GetHeight());

	// Set the ui system as listener for input events
	inputSystem->SetKeyboardListener(uiSystem);
	inputSystem->SetMouseListener(uiSystem);

Don't forget to delete / release the obejcts in the destructor. Inside the *App::Loop* method we now need to update and render the ui:

	// Update XAML renderer
	uiRenderer->Update(Time::Millisecs() / 1000.0f);

	// Render XAML offscreen
	uiRenderer->RenderOffscreen();

	// ..
	world->Update();
	world->Render();

	// Render XAML
	uiRenderer->Render();

	context->Sync(false);

Since we also want the UI to receive input we're going to add an else to the *if(freelookmode)* query:

	if(freelookmode)
	{
		//...
 	}	
	else
	{
		inputSystem->Capture();
	}

That's all! You should now see a tux:

![TUX](http://i.imgur.com/rdF5RCz.jpg)

If you see nothing, the application just crashes or complains about missing dlls you didn't read the noesis documentation. For more examples and the full source code for this project check the *Examples* folder.